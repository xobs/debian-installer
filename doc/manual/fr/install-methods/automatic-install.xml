<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 24663 -->

 <sect1 id="automatic-install">
 <title>Installation automatisée</title>
<para>

Pour installer Debian sur de nombreux ordinateurs, il est possible
d'automatiser complètement l'installation en utilisant les 
paquets Debian suivants&nbsp;:
<classname>fai</classname> (qui utilise un serveur d'installation),
<classname>replicator</classname>,
<classname>systemimager</classname>,
<classname>autoinstall</classname> et
l'installateur Debian lui-même.

</para>
 
<sect2>
<title>Installation automatique avec l'installateur Debian</title>

<para>
L'installateur Debian peut automatiser des installations grâce à des fichiers
de préconfiguration. Un fichier de préconfiguration peut se trouver sur le
réseau ou sur un support amovible. Il sert à répondre aux questions qui seront
posées pendant l'installation.
</para>
<para>
Le format de ce fichier est celui de la commande debconf-set-selections. 
Un exemple fonctionnel et bien documenté, que vous pouvez modifier, se trouve 
dans <xref linkend="example-preseed"/>.
</para>
<para>
Une façon simple de créer le fichier complet est de faire une installation,
puis d'utiliser la commande <filename>debconf-get-selections</filename> qui 
se trouve dans le paquet <classname>debconf-utils</classname> pour copier les 
données de debconf et cdebconf dans /var/log/debian-installer/cdebconf et les 
mettre dans un seul fichier&nbsp;:

<informalexample><screen>
$ debconf-get-selections --installer &gt; <replaceable>fichier</replaceable>
$ debconf-get-selections &gt;&gt; <replaceable>fichier</replaceable>
</screen></informalexample>

Cependant, un fichier créé de cette manière possédera des éléments qu'on ne
doit pas préconfigurer&nbsp;; le fichier dans <xref linkend="example-preseed"/>
est un meilleur point de départ pour la plupart des utilisateurs.
</para>
<para>
Une fois que vous avez créé ce fichier de préconfiguration, vous pouvez le
modifier, le placer sur un serveur web ou le copier sur le support de
l'installateur. Mais, quelque soit sa place, vous devez dire à l'installateur
de l'utiliser au moment de l'amorçage.
</para>
<para>
Pour que l'installateur utilise un fichier de préconfiguration sur le réseau,
il faut ajouter preseed/url=http://url/to/preseed.cfg aux paramètres 
d'amorçage du noyau. Bien sûr, la préconfiguration ne fonctionnera pas avant 
que l'installateur n'ait installé le réseau et récupéré le fichier&nbsp;; 
le mieux est que l'installateur utilise DHCP et installe le réseau sans poser 
de questions. On peut aussi régler la priorité à «&nbsp;critique&nbsp;» pour
éviter toute question pendant l'installation du réseau.
Voyez <xref linkend="installer-args"/>.
</para>
<para>
Pour mettre un fichier de préconfiguration sur un cédérom, il faut recréer
l'image ISO et y ajouter le fichier. Voyez la page de manuel de mkisofs.
Vous pouvez aussi mettre le fichier de préconfiguration sur une disquette et
utiliser preseed/file=/floppy/preseed.cfg
</para>
<para arch="i386">
Si vous voulez amorcer à partir d'une clé USB, vous pouvez copier le fichier de
préconfiguration sur le système de fichier de la clé, modifier le fichier
syslinux.cfg et y ajouter preseed/file=/hd-media/preseed.cfg pour les 
paramètres d'amorçage du noyau.
</para>
</sect2>
</sect1>

