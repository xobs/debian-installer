<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 30207 -->

<sect3 id="lvmcfg">
   <title>Configuration du <quote>Logical Volume Manager</quote> (LVM)</title>
<para>

Si vous travaillez sur les ordinateurs comme administrateur système ou
si vous êtes un utilisateur <quote>avancé</quote>, vous avez sûrement
rencontré le cas suivant&nbsp;: une partition qui manque d'espace libre 
(c'est habituellement la plus importante du système) et une partition
grossièrement sous-utilisée, la gestion de cette situation ayant consisté
en déplacement de fichiers, création de liens symboliques, etc.
</para>
<para>
Pour éviter cette situation, on peut utiliser un gestionnaire de volumes
logiques, <quote>Logical Volume Manager</quote> (LVM). Dit simplement,
avec LVM vous pouvez combiner vos partitions 
(<firstterm>volumes physiques</firstterm> dans le lexique LVM) pour former
un disque virtuel (<firstterm>groupe de volumes</firstterm>) qui peut être
divisé en partitions virtuelles (<firstterm>volumes logiques</firstterm>).
L'idée est que les volumes logiques s'étendent sur plusieurs disques physiques.
</para>
<para>
Dès lors, quand vous constatez que votre vieille partition 
<filename>/home</filename> de 160&nbsp;Go a besoin d'espace, vous pouvez
simplement ajouter un disque de 300&nbsp;Go à votre machine, l'intégrer au
groupe de volumes existant et redimensionner le volume logique qui comprend
la partition <filename>/home</filename> et voilà, vos utilisateurs ont
de nouveau de la place sur la partition de 460&nbsp;Go&nbsp;!
Cet exemple est bien sûr un peu simplifié. Si vous ne l'avez pas encore lu,
vous devriez consulter le 
<ulink url="&url-lvm-howto;">HOWTO LVM</ulink>.
</para>
<para>
La configuration de LVM dans l'installateur debian est très simple. D'abord,
vous devez marquer les partitions à utiliser comme volumes physiques par
LVM. Cela se fait avec <command>partman</command> dans le menu 
<guimenu>Partition settings</guimenu>, où vous choisissez
<menuchoice><guimenu>Use as:</guimenu> 
<guimenuitem>volume physique pour LVM</guimenuitem></menuchoice>.
Puis, vous lancez le module <command>lvmcfg</command> (soit directement dans
<command>partman</command>, soit dans le menu principal de l'installateur) et
vous combinez les volumes physiques dans un groupe de volumes dans le menu
<guimenuitem>Modifier les groupes de volumes</guimenuitem>. Enfin vous
devez créer les volumes logiques au dessus des groupes de volumes dans le
menu <guimenuitem>Modifier les volumes logiques</guimenuitem>.

<note arch="powerpc" condition="sarge"><para>
Il n'existe pas de standard unanimement accepté pour identifier les partitions
de type LVM sur les Apple Power Macintosh et la procédure décrite précédemment
pour créer les volumes et les groupes de volumes ne fonctionne pas.
Il existe cependant, quand on connaît les outils LVM, une manière de faire.

</para><para>

Pour installer Debian sur un Power Macintosh en utilisant des volumes logiques,
vous devez créer les partitions pour les volumes logiques. Dans le menu
<guimenu>Paramétres des partitions</guimenu>, vous devez choisir
<menuchoice><guimenu>Utiliser comme :</guimenu> <guimenuitem>Ne pas utiliser</guimenuitem></menuchoice> pour ces partitions (l'option <quote>utiliser la partition 
comme volume logique</quote> n'est pas proposée). Quand vous avez créé toutes 
vos partitions, vous pouvez lancer le gestionnaire des volumes logiques. Mais
comme aucun volume n'a été créé, vous devez aller sur la deuxième console,
voyez <xref linkend="shell"/>, et créer vous-même les volumes.

</para><para>

Pour créer un volume physique sur chacune de vos partitions, vous pouvez
utiliser la commande <command>pvcreate</command> à l'invite de l'interpréteur
de commande. Pour créer un groupe de volumes, utilisez la commande
<command>vgcreate</command>. Vous pouvez sans problème ignorer les messages
d'erreur à propos de <quote>incorrect metadata area header checksums and 
fsync failures</quote>. Quand vous avez terminé, vous pouvez revenir sur la
première console et passer directement au menu <command>lvmcfg</command> pour
la gestion des volumes logiques. Vous verrez les groupes de volumes et vous
pourrez créer les volumes logiques dont vous avez besoin.
</para></note>

</para>

<para>

Quand vous aurez quitté <command>lvmcfg</command>, vous verrez dans 
<command>partman</command> tous les volumes logiques créés comme si c'étaient
de simples partitions, et vous devez les traiter ainsi.
</para>
</sect3>


