<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 27118 -->

   <sect3 id="mdcfg">
   <title>Nastavení vícediskových zaøízení (Softwarový RAID)</title>
<para>

Jestli¾e máte ve svém poèítaèi více ne¾ jeden pevný
disk<footnote><para>

Ve skuteènosti mù¾ete MD vytvoøit i z oblastí le¾ících na jednom
fyzickém disku, ale nezískáte tím ¾ádnou popisovanou výhodu.

</para></footnote>, mù¾ete vyu¾ít této skuteènosti nastavit disky pro
vìt¹í výkon a/nebo pro vìt¹í bezpeènost dat. Výsledek se nazývá
<firstterm>Vícediskové zaøízení - MD</firstterm> (nebo podle své
nejznámìj¹í varianty <firstterm>softwarový RAID</firstterm>).

</para><para>

Jednodu¹e øeèeno je MD mno¾ina oblastí umístìných na rùzných
discích. Tyto oblasti se v <command>mdcfg</command> spojí dohromady
a vytvoøí <emphasis>logické</emphasis> zaøízení. Toto zaøízení pak
mù¾ete pou¾ívat jako bì¾nou oblast (napøíklad
v <command>partman</command>u ji mù¾ete zformátovat, pøiøadit jí
pøípojný bod atd.).

</para><para>

Co vám tato operace pøinese závisí na typu vícediskového zaøízení,
které vytváøíte. Momentálnì jsou podporovány:

<variablelist>
<varlistentry>

<term>RAID0</term><listitem><para>

Je hlavnì zamìøen na rychlost. RAID0 rozdìlí v¹echna pøíchozí data na
<firstterm>prou¾ky</firstterm> (stripes) a ty pak rovnomìrnì rozmístí
na ka¾dý disk v poli. To mù¾e zvý¹it rychlost ètení a zápisu, ov¹em
pokud jeden z diskù odejde do vìèných lovi¹», odejdou s ním
<emphasis>v¹echna data</emphasis> (èást informace je stále na zdravém
disku (discích), zbývající èást <emphasis>byla</emphasis> na vadném
disku).

</para><para>

Typicky se RAID0 pou¾ívá pro oblast na støíhání videa.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID1</term><listitem><para>

Je vhodný systémy, kde je spolehlivost na prvním místì. Skládá se
z nìkolika (obvykle dvou) stejnì velkých oblastí, kde ka¾dá oblast
obsahuje naprosto shodná data. Prakticky to znamená tøi vìci. Za prvé,
pokud jeden z diskù sel¾e, stále máte data zrcadlena na zbývajících
discích. Za druhé, k dispozici máte pouze èást celkové kapacity
(pøesnìji to je velikost nejmen¹í oblasti v poli). Za tøetí, pokud se
vyskytne vìt¹í poèet po¾adavkù na ètení, mohou se tyto rovnomìrnì
rozdìlit mezi jednotlivé disky, co¾ mù¾e pøinést zajímavé zrychlení
u serverù, kde pøeva¾ují ètecí operace na zápisovými.

</para><para>

Volitelnì mù¾ete mít v poli rezervní disk, který se normálnì nevyu¾ívá
a v pøípadì výpadku jednoho z diskù okam¾itì nahradí jeho místo.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID5</term><listitem><para>

Je rozumným kompromisem mezi rychlostí, spolehlivostí a redundancí
dat. RAID5, podobnì jako RAID0, rozdìlí v¹echna pøíchozí data na
prou¾ky a poté je roznomìrnì rozmístí na disky v poli. Oproti RAID0 je
zde v¹ak podstatný rozdíl v tom, ¾e se samotná data zapisují pouze na
<replaceable>n</replaceable> - 1 diskù. Zbývající
<replaceable>n</replaceable>. disk nezahálí, ale zapí¹e se na nìj
paritní informace. Paritní disk není statický (to by se pak jednalo
o RAID4), ale pravidelnì se posouvá tak, aby byly paritní informace
rozmístìny rovnomìrnì na v¹ech discích v poli. V pøípadì výpadku
jednoho z diskù se mù¾e chybìjící informace dopoèítat ze zbývajích dat
a jejich parity. RAID5 se musí skládat z alespoò
<emphasis>tøí</emphasis> aktivních zaøízení. Volitelnì mù¾ete mít
v poli rezervní disk, který se normálnì nevyu¾ívá a v pøípadì výpadku
jednoho z diskù okam¾itì nahradí jeho místo.

</para><para>

Jak je vidìt, RAID5 nabízí podobný stupeò spolehlivosti jako RAID1,
ov¹em dosahuje men¹í míry redundance dat. Ètecí operace budou stejnì
rychlé jako na RAID0, ov¹em zápis bude mírnì pomalej¹í kvùli poèítání
paritních informací.

</para></listitem>
</varlistentry>
</variablelist>

Kdybychom mìli shrnout podstatné vlastnosti:

<informaltable>
<tgroup cols="5">
<thead>
<row>
  <entry>Typ</entry>
  <entry>Minimálnì zaøízení</entry>
  <entry>Rezervní zaøízení</entry>
  <entry>Pøe¾ije výpadek disku?</entry>
  <entry>Dostupné místo</entry>
</row>
</thead>

<tbody>
<row>
  <entry>RAID0</entry>
  <entry>2</entry>
  <entry>ne</entry>
  <entry>ne</entry>
  <entry>velikost nejmen¹ího zaøízení krát poèet aktivních zaøízení v in RAIDu</entry>
</row>

<row>
  <entry>RAID1</entry>
  <entry>2</entry>
  <entry>volitelnì</entry>
  <entry>ano</entry>
  <entry>velikost nejmen¹ího zaøízení v RAIDu</entry>
</row>

<row>
  <entry>RAID5</entry>
  <entry>3</entry>
  <entry>volitelnì</entry>
  <entry>ano</entry>
  <entry>velikost nejmen¹ího zaøízení krát (poèet akt. zaøízení v RAIDu - 1)</entry>
</row>

</tbody></tgroup></informaltable>

</para><para>

Chcete-li se o Softwarovém RAIDu dozvìdìt více, rozhodnì se podívejte
na <ulink url="&url-software-raid-howto;">Software RAID HOWTO</ulink>.

</para><para>

Pro vytvoøení vícediskového zaøízení musí být oblasti, ze kterých se
má zaøízení skládat, oznaèeny pro pou¾ití v RAIDu.  (To se provádí
v <command>partman</command>u v menu <guimenu>Nastavení
oblasti</guimenu>, kde byste mìli nastavit polo¾ku <guimenu>Pou¾ít
jako:</guimenu> na hodnotu <guimenuitem>fyzický svazek pro
RAID</guimenuitem>.)

</para><warning><para>

Podpora vícediskových zaøízení je relativnì nedávný pøírùstek
k instalaènímu programu a proto je mo¾né, ¾e pokud se pokusíte pou¾ít
vícediskové zaøízení pro koøenovou oblast (<filename>/</filename>),
tak se mohou objevit nìjaké problémy se zavadìèem. Zku¹ení u¾ivatelé
mohou tyto problémy obejít ruèním nastavením v shellu.

</para></warning><para>

Na první obrazovce <command>mdcfg</command> jenodu¹e vyberte
<guimenuitem>Vytvoøit MD zaøízení</guimenuitem>. Bude vám nabídnut
seznam podporovaných typù vícediskových zaøízení, ze kterého si jeden
vyberte (napø. RAID1). Co bude následovat, závisí na typu vybraného
zaøízení.

</para>

<itemizedlist>
<listitem><para>

RAID0 je velmi jednoduchý &mdash; va¹ím jediným úkolem je vybrat
z nabídnutého seznamu RAIDových oblastí ty, které budou tvoøit pole.

</para></listitem>
<listitem><para>

RAID1 je tro¹ku slo¾itìj¹í. Nejprve musíte zadat poèet aktivních
a poèet rezervních zaøízení (oblastí), které budou tvoøit RAID. Dále
musíte ze seznamu dostupných RAIDových oblastí vybrat ty, které mají
být aktivní a poté ty, které mají být rezervní. Poèty vybraných
oblastí se musí rovnat èíslùm, která jste zadali pøed chvílí. Pokud
udìláte chybu a vyberete jiný poèet oblastí, nic se nedìje &mdash;
&d-i; vás nenechá pokraèovat, dokud v¹e nespravíte.

</para></listitem>

<listitem><para>

RAID5 se nastavuje stejnì jako RAID1 s drobnou výjimkou &mdash; musíte
pou¾ít nejménì <emphasis>tøi</emphasis> aktivní zaøízení.

</para></listitem>
</itemizedlist>

<para>

Poznamenejme, ¾e mù¾ete pou¾ívat více typù vícediskových zaøízení
najednou. Napøíklad pokud máte pro MD vyhrazeny tøi 200 GB pevné disky
a na ka¾dém máte dvì 100 GB oblasti, mù¾ete z prvních oblastí v¹ech
diskù sestavit pole RAID0 (rychlá 300 GB oblast pro støih videa) a ze
zbývajících tøí oblastí (2 aktivní a 1 rezervní) sestavit RAID1
(rozumnì spolehlivá 100 GB oblast pro domovské adresáøe u¾ivatelù).

</para><para>

A¾ nastavíte vicedisková zaøízení podle chuti, mù¾ete ukonèit
<command>mdcfg</command> a vrátit se tak do
<command>partman</command>u, kde tìmto zaøízením pøiøadíte obvyklé
atributy jako soubrové systémy a pøípojné body.

</para>
   </sect3>
