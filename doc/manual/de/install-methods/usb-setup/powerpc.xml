<!-- retain these comments for translator revision tracking -->
<!-- original version: 27345 -->

   <sect3 arch="powerpc">
   <title>Partitionieren eines USB-Sticks auf &arch-title;-Systemen</title>
<para>

Die meisten USB-Sticks sind nicht derart vorkonfiguriert, dass OpenFirmware
davon booten kann, so dass Sie den Stick neu partitionieren müssen.
Auf Mac-Systemen führen Sie <userinput>mac-fdisk /dev/sda</userinput> aus,
erzeugen mit dem <userinput>i</userinput>-Befehl eine neue Partitionstabelle
und dann eine neue Partition des Typs Apple_Bootstrap (mit dem
<userinput>C</userinput>-Kommando). Bedenken Sie, dass die erste <quote>Partition</quote>
immer die Partitionstabelle selbst ist. Geben Sie dann ein:

<informalexample><screen>
$ hformat /dev/<replaceable>sda2</replaceable>
</screen></informalexample>

Sorgen Sie dafür, dass Sie den richtigen Gerätenamen des USB-Sticks
verwenden. Der Befehl <command>hformat</command> ist im Debian-Paket
<classname>hfsutils</classname> enthalten.

</para><para>

Um den Kernel zu starten, nachdem wir vom USB-Stick gebootet haben,
werden wir einen Bootloader auf dem Stick ablegen. Der Bootloader
<command>yaboot</command> kann auf einem HFS-Dateisystem installiert
werden und wird über eine Textdatei konfiguriert. Jedes Betriebssystem,
das das HFS-Dateisystem unterstützt, kann verwendet werden, um die
Konfiguration des Bootloaders zu verändern.

</para><para>

Das normale <command>ybin</command>-Werkzeug, das bei <command>yaboot</command>
dabei ist, unterstützt USB-Speicher-Geräte nicht, deshalb müssen wir
<command>yaboot</command> von Hand mit den <classname>hfsutils</classname>-Programmen
installieren. Geben Sie ein:

<informalexample><screen>
+$ hmount /dev/sda2
+$ hcopy -r /usr/lib/yaboot/yaboot :
+$ hattrib -c UNIX -t tbxi :yaboot
+$ hattrib -b :
+$ humount
</screen></informalexample>

Hier wieder die Warnung, den richtigen Gerätenamen zu verwenden.
Die Partition darf für diese Prozedur nicht anderweitig ins Dateisystem
eingehängt sein. Es wird hierbei der Bootloader auf die Partition geschrieben
und mittels der HFS-Programme passend gekennzeichnet, so dass OpenFirmware ihn startet.
Nachdem dies erledigt ist, sollten die restliche Vorbereitungen am USB-Stick mit
den normalen Unix-Programmen vorgenommen werden. 

</para><para>

Hängen Sie die Partition ins Dateisystem ein (<userinput>mount /dev/sda2 /mnt</userinput>)
und kopieren Sie die folgenden Dateien vom Debian-Archiv auf den Stick:

<itemizedlist>
<listitem><para>

<filename>vmlinux</filename> (Kernel-Binär-Datei)

</para></listitem>
<listitem><para>

<filename>initrd.gz</filename> (Initial-RAM-Disk-Image)

</para></listitem>
<listitem><para>

<filename>yaboot.conf</filename> (Yaboot-Konfigurationsdatei)

</para></listitem>
<listitem><para>

<filename>boot.msg</filename> (optionale Bootmitteilungen)

</para></listitem>
<listitem><para>

Optionale Kernel-Module

</para></listitem>
</itemizedlist>

</para><para>

Die Konfigurationsdatei <filename>yaboot.conf</filename> sollte die
folgenden Zeilen enthalten:

<informalexample><screen>
default=install
root=/dev/ram

message=/boot.msg

image=/vmlinux
        label=install
        initrd=/initrd.gz
        initrd-size=10000<phrase condition="sarge">
        append="devfs=mount,dall --"</phrase>
        read-only
</screen></informalexample>

Beachten Sie bitte, dass der Wert für den Parameter <userinput>initrd-size</userinput>
abhängig von dem Image, das Sie booten, evtl. noch erhöht werden muss.

</para>
   </sect3>
