<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 16879 -->

  <sect2 condition="supports-bootp" id="tftp-bootp">
  <title>Configurando um servidor BOOTP</title>
<para>

Existem dois servidores BOOTP disponívies para o GNU/Linux o
CMU <command>bootpd</command> e o outro atualmente é o 
servidor DHCP, ISC <command>dhcpd</command>, que estão disponíveis
nos pacotes <classname>bootp</classname> e <classname>dhcp</classname> 
na &debian;.

</para><para>

Para usar o CMU <command>bootpd</command> você deverá primeiro 
descomentar (ou adicionar) a linha relevante em <filename>/etc/inetd.conf</filename>.  
Na &debian;, você poderá executar <userinput>update-inetd --enable
bootps</userinput> então o comando <userinput>/etc/init.d/inetd
reload</userinput> para fazer isto. Em todo caso, a linha em questão 
deverá se parecer com:

<informalexample><screen>

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

</screen></informalexample>

</para><para>

Agora, você deverá criar um arquivo <filename>/etc/bootptab</filename>. 
Este terá a mesma quantidade de formato criptico e familiar como o 
bom e antigo <filename>printcap</filename> do BSD, 
<filename>termcap</filename>, e
<filename>disktab</filename>. Veja a página de manual do 
<filename>bootptab</filename> para mais informações. Para o 
CMU <command>bootpd</command> você precisará conhecer o endereço de 
hardware (MAC) do cliente. Aqui está um exemplo de arquivo
<filename>/etc/bootptab</filename>:

<informalexample><screen>

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

</screen></informalexample>

Você pelo menos precisará mudar a opção "ha", que especifica o 
endereço de hardware do cliente. A opção "bf" especifica o arquivo
que o cliente deverá baixar via TFTP; veja 
<xref linkend="tftp-images"/> para mais detalhes.

<phrase arch="mips"> 
Nos Indys SGI você poderá apenas apertar enter no monitor de comandos
e digitar <userinput>printenv</userinput>. O valor da variável
<userinput>eaddr</userinput> é o endereço MAC da máquina.
</phrase>

</para><para>

Em contraste, a configuração de um BOOTP com o ISC <command>dhcpd</command> 
é realmente fácil, por causa que ele trata clientes BOOTP de uma 
forma especial como clientes DHCP. Algumas arquiteturas requerem uma 
configuração complexa para a inicialização dos clientes via 
BOOTP. Caso a sua seja uma destas, leia a seção <xref linkend="dhcpd"/>.  
Caso contrário, você será provavelmente capaz de adicionar a diretiva
<userinput>allow bootp</userinput> no bloco de configuraçào de sub-rede 
de seu cliente e reiniciar o servidor dhcp
<command>dhcpd</command> com o comando <userinput>/etc/init.d/dhcpd
restart</userinput>.

</para>
  </sect2>
